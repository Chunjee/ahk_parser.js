!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ahkParser=t():e.ahkParser=t()}(self,(function(){return(()=>{"use strict";var e={776:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(246),r=console.debug.bind(console),o={biga:!0,WinClip:!0,WinClipAPI:!0},s={break:!0,continue:!0,settitlematchmode:!0},c={"DIRECTIVE OR COMMAND comma":!0,"command EOL or comment":!0,command:!0},f={idkVariable:!0,assignment:!0},l={"{ legacyIf":!0,"{ if":!0,"{ for":!0,"{ else":!0,"{ loop":!0,"{ namedIf":!0},a={"{ class":!0,"{ function DEFINITION":!0,"{ legacyIf":!0,"{ if":!0,"{ for":!0,"{ else":!0,"{ loop":!0,"{ namedIf":!0},p={"v1String findV1Expression":!0,"v1String findPercentVarV1Expression":!0},u={"%START %Var%":!0,"END% %Var%":!0},y={whiteSpaces:!0,emptyLines:!0},h={"( group":") group","start unit":"end unit"},x={on:"1",off:"0"},d={goto:!0,"#singleinstance":!0},g={"end assignment":!0,", function CALL":!0,") function CALL":!0,", assignment":!0,"end comma assignment":!0},b={splitpath:!0},m={stringupper:"StrUpper",stringlower:"StrLower"},w={},L={},v={Param:!0,idkVariable:!0,assignment:!0,"v1String findIdkVar":!0};t.default=e=>{for(let t=0,i=e.length;t<i;t++)if(v[e[t].type]){const i=e[t].text,n=D(i);if(n){for(let e=0,i=n.length;e<i;e++)if(n[e].type){const i=n[e].text;w[i]=!0;const r=i.toLowerCase();L[r]=L[r]||[],L[r].push(t)}}else{w[i]=!0;const e=i.toLowerCase();L[e]=L[e]||[],L[e].push(t)}}i("case","dCase","_case"),i("object","dObject","_object"),i("array","dArray","_array"),i("clipboard","A_Clipboard");const t=Object.keys(w);for(let n=0,r=t.length;n<r;n++){const r=t[n],o=r.toLowerCase();if(o.startsWith("true")&&"true"!==o||o.startsWith("false")&&"false"!==o){const t=L[o];for(let n=0,s=t.length;n<s;n++)if("assignment"===e[t[n]].type){i(o,`d_${r}`,`_${r}`);break}}}function i(t,i,n=""){const r=L[t];if(r){const t=n.toLowerCase();let o,s;if(L[i.toLowerCase()]){for(;L[`${s=C(3)}${t}`];);o=`${s}${n}`}else o=i;for(let t=0,i=r.length;t<i;t++)e[r[t]].text=o}}function C(e){for(var t=[],i="abcdefghijklmnopqrstuvwxyz",n=i.length,r=0;r<e;r++)t.push(i.charAt(Math.floor(Math.random()*n)));return t.join("")}let k,O,j,I,S,A,E,V,N=0;e:for(;N<e.length;){const e=T();if(1!==e){if(2===e)break e;N++}}const $=[];for(let t=0,i=e.length;t<i;t++)$.push(e[t].text);return $.join("");function T(){const t=e[N],i=t.type;if("{ object"===i)t.text="Map(";else if("} object"===i)t.text=")";else if(": object"===i)t.text=",";else if("singleVar"===i)t.text=`"${e[N].text}"`;else if("% v1->v2 expr"===i)t.text="";else if("functionName"===i){const i=e[N].text,n=e[N-1],r=i.toLowerCase();if(n&&". property"===e[N-1].type){if("length"===r){t.type="v2: prop";const i=k=N+1;if(!te(") function CALL","( function CALL"))return 2;e.splice(i,k-i+1)}else if("haskey"===r)t.text="Has";else if("count"===r){if(k=N,!ie("start unit","end unit"))return 3;const t=k;if(k=N+1,!te(") function CALL","( function CALL"))return 2;S=[],j=[e.slice(t+1,N-1)],B("(Type("),z(1),B(')=="Array"?'),z(1),B(".Length:"),z(1),B(".Count)"),e.splice(t,k-t+1,...S)}return 3}if("varsetcapacity"===r){if(Y())return 2;1===j.length?(z(1),B(".Size"),U()):(z(1),B(":=BufferAlloc("),z(2),W(",",3),z(3),B(")"),U())}else if("strreplace"===r){if(Y())return 2;B("StrReplace("),z(1),B(","),z(2),W(",",3),z(3),W(",0,",4),z(4),W(",",5),z(5),B(")"),U()}else if("object"===r)t.text="Map";else if("numput"===r){if(Y())return 2;const e=j.length;B("NumPut("),4===e?z(4):B('"UPtr"'),B(","),z(1),B(","),z(2),e>2&&(B(","),z(3)),B(")"),U()}else if("objgetaddress"===r){if(Y())return 2;z(1),B("["),z(2),B("].Ptr"),U()}else if("objsetcapacity"===r){if(Y())return 2;3===j.length?(z(1),B("["),z(2),B("]:=BufferAlloc("),z(3),B(")"),U()):(B("ObjSetCapacity("),z(1),B(","),z(2),B(")"),U())}else if("objgetcapacity"===r){if(Y())return 2;if(2===j.length){const e=H(j[0]);if(e.length&&"[ Array"===e[0].type&&"] Array"===e[e.length-1].type){const t=j[1]=H(j[1]);if(3===t.length&&"Integer"===t[1].type&&"1"===t[1].text)return j[0]=e.slice(1,-1),B("VarSetStrCapacity("),z(1),B(")"),U(),3}z(1),B("["),z(2),B("].Size"),U()}else B("ObjGetCapacity("),z(1),B(")"),U()}else if("objhaskey"===r){if(Y())return 2;z(1),B(".Has("),z(2),B(")"),U()}else if("objrawset"===r){if(Y())return 2;z(1),B("["),z(2),B("]:="),z(3),U()}else if("objrawget"===r){if(Y())return 2;z(1),B("["),z(2),B("]"),U()}else for(;;){if(O=e[++N],!O)return 2;const t=O.type,i=T();if(3!==i){if(i)return i;if(") function CALL"===t)return 3}}}else if("(.) property findTrailingExpr"===i)"Integer"!==e[N-2].type&&(e[N-1].text="",t.text=`["${e[N].text}"]`,t.type="v2: arrAccess");else if("if"===i){k=N+2;let t=e[k];if(t){let i=!1;if("( if"===t.type){if(k++,t=e[k],!t)return 3;i=!0}if("start unit"===t.type&&!te("end unit","start unit"))return 2;if(t=e[k+(i?2:1)],t&&"end if"===t.type){if(k--,t=e[k],"] ArrAccess"===t.type){if(t.type="edit",t.text=")",!ie("[ ArrAccess","] ArrAccess"))return 2;const i=e[k];i.type="edit",i.text=".Has("}return 3}}}else if(f[i]){const i=e[N].text;if(-1===i.indexOf("%")&&"a_isunicode"===i.toLowerCase()){for(;k=N,ee();){let t=N-1;if("? ternary"===e[k].type){O=e[k+1],O&&("emptyLines"!==O.type||O.text.includes("\n")||k++);const i=k+1;let n,r=!1;for(;k=N,Z();){"( group"===e[k].type&&(r=!0,t=k);break}if(k=i,!K(": ternary"))break;const o=k,s=e[k-1];s&&("emptyLines"!==s.type||s.text.includes("\n")||k--);const c=k;if(k=o,r){if(!te(") group","( group"))break;n=k+1}else{if(!J(g))break;n=k}let f=n-t;return k=n,X(),e[k].text.includes("\n")&&f--,e.splice(t,f,...e.slice(i,c)),3}break}t.text="true"}}else if("(statement) ,"===i){t.text=" ";const i=e[N+1];y[i.type]&&(t.text="")}else if(u[i])t.text="";else if(p[i]){const i=e[N].text;if(""!==i){let r,o="";r=e[N+1];e:for(;;){for(;r;){if(r.text){const e=r.text[0];n.whiteSpaceObj[e]||"\n"===e||(o=" ");break e}r=e[++k]}break e}t.text=`${n.whiteSpaceObj[e[N-1].text.slice(-1)]?"":" "}"${i.replace(/"/g,'`"')}"${o}`}}else if("= v1Assignment"===i){t.text=":=";const i=e[N+1];"v1String findV1Expression"===i.type&&""===i.text&&(i.type="edit",i.text='""')}else if("String"===i)t.text=`"${e[N].text.slice(1,-1).replace(/""/g,'`"')}"`;else if(c[i]){let i;const n=e[N].text.toLowerCase();if(s[n]){if(_())return 3;"v1String findV1Expression"===O.type&&(isNaN(Number(O.text))||(O.type="edit"))}else if("#noenv"===n){t.text="";const i=e[N+1];i&&"emptyLines"===i.type&&(i.text="")}else{if("setbatchlines"===n)return!_()&&K("end command")?(e.splice(N-1,k+1-N),1):(t.text="",3);if(d[n]){if(_())return 3;"v1String findV1Expression"===O.type&&(O.type="edit")}else if("listlines"===n){if(_())return 3;if("v1String findV1Expression"===O.type){const e=O.text;x[e.toLowerCase()]?(O.type="edit",O.text=x[e.toLowerCase()]):isNaN(Number(e))||(O.type="edit")}}else if(b[n]){if(k=N,P())return 3}else if("stringtrimright"===n){if(_())return 3;if(P(),Q())return 2;G(1),M(":=SubStr("),G(2),M(",1,-"),G(3),M(")"),R(),q()}else if(i=m[n]){if(_())return 3;if(function(t){let i=1;for(;;){if(O=e[++k],!O)return!0;const n=O.type;if(u[n]||p[n])t[i]&&(O.type="edit");else if(", command comma"===n)i++;else if("end command"===n)return!0}}({1:!0,2:!0}),Q())return 2;G(1),M(`:=${i}(`),G(2),F(",",3),G(3),M(")"),R(),q()}else if("random"===n){if(P(),Q())return 2;G(1),M(":=Random("),G(2),F(",",3),G(3),M(")"),R(),q()}}}else if("legacyIf var"===i){k=N+2;let t=e[k];e:for(;;){if(t&&"legacyIf is"===t.type){if(k+=2,t=e[k],!t)break e;let i=!1;if("legacyIf (is) not"===t.type&&(i=!0,k+=2,t=e[k],!t))break e;if("v1String findV1Expression"===t.type){let n;return"number"===t.text.toLowerCase()?n="IsNumber":"alnum"===t.text.toLowerCase()?n="IsAlnum":"float"===t.text.toLowerCase()?n="IsFloat":r("unknown type, tell me"),e.splice(N,k-N+1,{text:`${i?"!":""}${n}(${e[N].text})`,type:"v2: if is type"}),3}}break e}}else if("1operator"===i){if("&"===t.text){let i;k=N;const r=k;if(!(i=J(h)))return 2;if(!te(h[i],i))return 2;const o=e.slice(r+1,k),s=[];for(let e=0,i=o.length;e<i;e++){const i=o[e].text;if(i)for(let e=0,r=i.length;e<r;e++)n.variableCharsObj[i[e]]&&(t.text="",s.push(i[e]))}const c=s.join("");isNaN(Number(c))&&e.splice(k+1,0,{type:"edit",text:".Ptr"})}}else if("hotkey"===i){k=N;const t=N;let i,n=0;for(;;){if(i=e[++k],!i)return 3;const r=i.type;if(l[r])n++;else if("} unknown"===r)n--;else{if("hotkey"===r)return 3;if(c[r]&&0===n&&"return"===i.text.toLowerCase())return i.type="edit",i.text="}",e.splice(t+1,0,{text:"\n{",type:"edit"}),3}}}else{if("className"!==i)return 0;if(o[e[N].text]){k=N+1;let t,i=0;for(t=e[++k];t;){const n=t.type;if("} unknown"===n){if(i--,0===i)return 3}else a[n]?i++:"function DEFINITION name"===n&&(e.splice(k,0,{type:"edit",text:"static "}),k++);t=e[++k]}}}return 3}function R(){const t=e[N+1];t&&"emptyLines"===t.type&&";"===t.text[0]&&M(" ")}function _(){if(k=N+1,O=e[k],!O)return!0;if("emptyLines"===O.type&&(O=e[++k],!O))return!0;if("(statement) ,"===O.type){if(O=e[++k],!O)return!0;if("whiteSpaces"===O.type&&(O=e[++k],!O))return!0}}function D(e){let t,i,n,r=e.indexOf("%");const o=[];if(-1!==r){for(i=e.slice(0,r),o.push({text:i}),n=e.indexOf("%",r+1),t=e.slice(r+1,n),o.push({type:!0,text:t});r=e.indexOf("%",n+1),-1!==r;)i=e.slice(n+1,r),o.push({text:i}),n=e.indexOf("%",r+1),t=e.slice(r+1,n),o.push({type:!0,text:t});return i=e.slice(n+1),o.push({text:i}),o}return!1}function P(){for(;;){if(O=e[++k],!O)return!0;const t=O.type;if(u[t])O.type="edit";else if(p[t])O.type="edit";else if("end command"===t)return!0}}function G(e){const t=A[e-1];let i;if(t&&(i=t.length))for(let e=0;e<i;e++)y[t[e].type]||V.push(t[e])}function M(e){V.push({text:e})}function F(e,t){A[t-1]&&V.push({text:e})}function q(){e.splice(E,0,...V),N+=V.length}function z(e){const t=j[e-1];let i;if(t&&(i=t.length))for(let e=0;e<i;e++)y[t[e].type]||S.push(t[e])}function B(e){S.push({text:e})}function W(e,t){j[t-1]&&S.push({text:e})}function U(){e.splice(I,0,...S),N+=S.length}function H(e){let t=0;for(let i=e.length;t<i&&y[e[t].type];t++);const i=t;for(t=e.length-1;t>i&&y[e[t].type];t--);return e.slice(i,t+1)}function Q(){const t=E=N;N+=2,V=[];let i,n=N;for(A=[];;)for(;;){if(i=e[N],!i)return!0;const r=i.type,o=T();if(1!==o){if(2===o)return!0;if(3!==o){if("end command"===r){const i=N+1-t;return A.push(e.slice(n,N)),e.splice(t,i),N-=i,!1}", command comma"===r&&(A.push(e.slice(n,N)),n=N+1),N++}else N++}}}function Y(){const t=I=N;N+=2,S=[];let i,n=N;for(j=[];;)for(;;){if(i=e[N],!i)return!0;const r=i.type,o=T();if(1!==o){if(2===o)return!0;if(3!==o){if(") function CALL"===r){const i=N+1-t;return j.push(e.slice(n,N)),e.splice(t,i),N-=i,!1}", function CALL"===r&&(j.push(e.slice(n,N)),n=N+1),N++}else N++}}}function J(t){let i;for(i=e[++k];i;){const n=i.type;if(t[n])return n;i=e[++k]}return!1}function K(t){let i;for(i=e[++k];i;){if(i.type===t)return!0;i=e[++k]}return!1}function X(){let t;for(t=e[--k];t;){if(void 0!==t.text)return!0;t=e[--k]}return!1}function Z(){let t;for(t=e[--k];t;){if("emptyLines"!==t.type&&void 0!==t.text)return!0;t=e[--k]}return!1}function ee(){let t;for(t=e[++k];t;){if("emptyLines"!==t.type&&void 0!==t.text)return!0;t=e[++k]}return!1}function te(t,i){let n,r=1;for(n=e[++k];n;){const o=n.type;if(r&&(o===t?r--:o===i&&r++,0===r))return!0;n=e[++k]}return!1}function ie(t,i){let n,r=1;for(;k--;){n=e[k];const o=n.type;if(r&&(o===t?r--:o===i&&r++,0===r))return!0}return!1}}},544:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(246),r=console.debug.bind(console);t.default=e=>{"\ufeff"===e[0]&&(e=e.slice(1));const t=e.split("\n"),i=t.length,o=[],s={whiteSpaces:!0,emptyLines:!0};let c;c=0;let f,l,a,p,u,y,h,x=0,d=0,g=0,b=0,m="",w=!1,L=0,v=!1,C=-1,k=!1,O=!1,j=!1,I=!1;h=0;let S,A,E,V=!1,N=0,$=-1,T=!1,R=!1,_=-1,D=-1,P=-1;e:for(;x<i&&(d=0,g=t[x].length,ye());){t:for(;;){if(x===i)break e;if(d===g){o.push({type:"newLine startOfLineLoop",text:"\n",i1:x,c1:d}),x++;continue e}if(";"===t[x][d]){const e=t[x].slice(d,g);o.push({type:"SemiColonComment",text:e,i1:x,c1:d,c2:g}),o.push({type:"newLine SemiColonComment",text:"\n",i1:x,c1:d}),x++;continue e}if("}"===t[x][d]){if(o.push({type:"} unknown",text:"}",i1:x,c1:d}),d++,!ye())break e;v=!0;continue t}a=d;const e=d;if(S=o.length,n.variableCharsObj[t[x][d]]){d++,be(),m=t[x].slice(a,d),E=d,A=x;const s=n.typeOfValidVarName[m.toLowerCase()];if(s){D=x;const c=o.length;if(ye()){if(","===t[x][d]){if(o.push({type:"(statement) ,",text:",",i1:x,c1:d}),d++,1===s||4===s){const t=U();if(1===t)continue t;if(2===t)continue e;if(o.splice(S,0,{type:"DIRECTIVE OR COMMAND comma",text:m,i1:A,c1:e,c2:E}),j=!0,ee(),j=!1,x===i)break e;q(", command comma");const n=o.length-1;o.splice(o.length-("emptyLines"===o[n].type?1:0),0,{type:"end command"}),v=!0;continue t}v=!0;continue t}if(x===A&&n.whiteSpaceObj[t[A][E]]){if(1===s){o.splice(S,0,{type:"directive",text:m,i1:A,c1:e,c2:E});const i=t[x].slice(d,g);o.push({type:"directive to EOL",text:i,i1:x,c1:a,c2:g}),o.push({type:"newLine directive",text:"\n",i1:x,c1:d}),x++;continue e}if(2===s){o.splice(S,0,{type:"if",text:m,i1:A,c1:e,c2:E}),S=o.length;i:for(;n.variableCharsObj[t[x][d]];){const e=d,i=x,r=g;for(;de()||n.variableCharsObj[t[x][d]];)d++;const s=d;for(;d<g&&n.whiteSpaceObj[t[x][d]];)d++;const c=d;let f=d,l=o.length;be(),E=d,A=x;let a=t[A].slice(f,E);n:for(;;){if(!a){d=e,x=i,g=r;break i}let s,c=!1;if("not"!==a.toLowerCase()||d!==g&&!n.whiteSpaceObj[t[x][d]]?c=!0:(o.push({type:"legacyIf not",text:a,i1:x,c1:f,c2:d}),he(),f=d,l=o.length,be(),E=d,A=x,a=t[A].slice(f,E)),"in"!==a.toLowerCase()||d!==g&&!n.whiteSpaceObj[t[x][d]])if("contains"!==a.toLowerCase()||d!==g&&!n.whiteSpaceObj[t[x][d]]){if("between"===a.toLowerCase()&&(d===g||n.whiteSpaceObj[t[x][d]])){o.push({type:"legacyIf between",text:a,i1:x,c1:f,c2:d}),k=!0;break n}}else o.push({type:"legacyIf contains",text:a,i1:x,c1:f,c2:d}),O=!0;else o.push({type:"legacyIf in",text:a,i1:x,c1:f,c2:d}),O=!0;if(c&&"is"===a.toLowerCase()&&(d===g||n.whiteSpaceObj[t[x][d]])){o.push({type:"legacyIf is",text:a,i1:x,c1:f,c2:d}),he(),a=t[x].slice(d,s=d+3),"not"!==a.toLowerCase()||n.variableCharsObj[t[x][s]]||(o.push({type:"legacyIf (is) not",text:a,i1:x,c1:d,c2:d+3}),d+=3,he());break n}const p=d,u=x;if(!ye()){d=e,x=i,g=r,o.splice(o.length-1,1);break i}let y=!0;if(d===p&&x===u&&(y=!1),d<g-1&&n.legacyIfOperators[t[x].slice(d,d+2)]){o.push({type:"2legacyIfOperators",text:t[x].slice(d,d+2),i1:x,c1:d,c2:d+2}),d+=2;break n}if(d<g&&n.legacyIfOperators[t[x][d]]){o.push({type:"1legacyIfOperators",text:t[x][d],i1:x,c1:d}),d++;break n}d=e,x=i,g=r,y&&o.splice(o.length-1,1);break i}const p=t[i].slice(s,c);if(p&&o.splice(l,0,{type:"whiteSpaces",text:p,i1:x,c1:s,c2:d}),o.splice(l,0,{type:"legacyIf var",text:t[i].slice(e,s),i1:i,c1:e,c2:s}),ee(),O=!1,"{"===t[x][d]&&(o.push({type:"{ legacyIf",text:"{",i1:x,c1:d}),d++,!ye()))break e;v=!0;continue t}if(ne()||fe(),o.splice(o.length-1,0,{type:"end if"}),x===i)break e;if("{"===t[x][d]&&(o.push({type:"{ if",text:"{",i1:x,c1:d}),d++,!ye()))break e;v=!0;continue t}if(d<g&&"="===t[x][d]){o.splice(S,0,{type:"var at whiteSpace v1Assignment",text:m,i1:x,c1:a,c2:d}),o.push({type:"= whiteSpace v1Assignment",text:"=",i1:x,c1:d}),d++,ee(),v=!0;continue t}const c=F();if(1===c)continue t;if(2===c)break e;if(3===s){if(o.splice(S,0,{type:"global local or static{ws}",text:m,i1:A,c1:e,c2:E}),W(),ne(),B())break e;v=!0;continue t}if(4===s){const e=U();if(1===e)continue t;if(2===e)continue e;if("for"===m.toLowerCase()){let e,s,c;if(o.splice(S,0,{type:"for",text:m,i1:A,c1:a,c2:E}),W(),","===t[x][d]&&(o.push({type:", for",text:",",i1:x,c1:d}),d++,W()),"in"!==(e=t[x].slice(d,s=d+2)).toLowerCase()||s!==g&&!n.whiteSpaceObj[c=t[x][s]]?r("ILLEGAL, (for) is missing `in`"):o.push({type:"in{ws} lookForIn",text:`${e}${c||""}`,i1:x,c1:d,c2:s}),d+=3,ne()||fe(),x===i)break e;const f=o.length-1;if(o.splice(o.length-("emptyLines"===o[f].type?1:0),0,{type:"end command"}),"{"===t[x][d]&&(o.push({type:"{ for",text:"{",i1:x,c1:d}),d++,!ye()))break e;v=!0;continue t}if("else"===m.toLowerCase()){if(o.splice(S,0,{type:"else whiteSpace",text:m,i1:A,c1:a,c2:E}),"{"===t[x][d]&&(o.push({type:"{ else",text:"{",i1:x,c1:d}),d++,!ye()))break e;v=!0;continue t}if(o.splice(S,0,{type:"command",text:m,i1:A,c1:a,c2:E}),j=!0,ee(),j=!1,x===i)break e;q(", command whiteSpace"),v=!0;continue t}if(5===s){o.splice(S,0,{type:"class",text:m,i1:A,c1:a,c2:E});const e=d;if(be(),o.push({type:"className",text:t[x].slice(e,d),i1:x,c1:e,c2:d}),!ye())break e;let i;if("extends"===(i=t[x].slice(d,d+7)).toLowerCase()){o.push({type:"className",text:i,i1:x,c1:d,c2:d+7}),d+=7,he();const e=d;be();const n=t[x].slice(e,d);if(n&&o.push({type:"extendedClassName",text:n,i1:x,c1:e,c2:d}),!ye())break e}if("{"===t[x][d]){if(o.push({type:"{ class",text:"{",i1:x,c1:d}),d++,!ye())break e}else r("illegal class name",we());v=!0;continue t}r("this cannot happen because idkType must be in 1,2,3,4,5",we())}else if("("===t[x][d]){if(2===s){if(o.splice(S,0,{type:"if",text:m,i1:A,c1:e,c2:E}),ne()||fe(),o.splice(o.length-1,0,{type:"end if"}),x===i)break e;if("{"===t[x][d]&&(o.push({type:"{ if",text:"{",i1:x,c1:d}),d++,!ye()))break e;v=!0;continue t}const n=H();if(1===n)continue t;if(2===n)continue e}else if("{"===t[x][d]&&"loop"===m.toLowerCase()){if(o.splice(S,0,{type:"loop",text:m,i1:A,c1:a,c2:E}),o.push({type:"{ loop",text:"{",i1:x,c1:d}),d++,!ye())break e;v=!0;continue t}}if(o.length===c+1||x===i){o.splice(S,0,{type:"command EOL or comment",text:m,i1:A,c1:a,c2:E}),R=o.length,_=x;const e=m.toLowerCase();if(n.elseLoopReturn[e]){if(ne());else if("else"===e){if("{"===t[x][d]&&(o.push({type:"{ else",text:"{",i1:x,c1:d}),d++,!ye()))break e}else if("loop"===e&&"{"===t[x][d]&&(o.push({type:"{ loop",text:"{",i1:x,c1:d}),d++,!ye()))break e}else{if(x===i)break e;ie(),q("command EOL or comment"),o.push({type:"command end"})}v=!0;continue t}}if(x===A&&":"===t[x][d]&&(d+1===g||n.whiteSpaceObj[t[x][d+1]])){d++;const e=t[x].slice(a,d);if(o.push({type:"label:",text:e,i1:x,c1:a,c2:d}),!ye())break e;v=!0;continue t}}for(;d<g&&(de()||n.variableCharsObj[t[x][d]]);)d++;if(d===g){r("illegal: unexpected EOL after var parsing",me()),x++;continue e}if(m=t[x].slice(a,d),E=d,A=x,T=!1,m){let n=F();if(1===n)continue t;if(2===n)break e;if(se(),x===i||!ye()){T&&o.splice(S,0,{type:"functionName",text:m,i1:A,c1:e,c2:E});break e}if(d<g&&"="===t[x][d]&&":"!==t[x][d+1]){o.splice(S,0,{type:"var at v1Assignment",text:m,i1:A,c1:e,c2:E}),o.push({type:"= v1Assignment",text:"=",i1:x,c1:d}),d++,D=x,ee(),v=!0;continue t}if(n=F(),1===n)continue t;if(2===n)break e;if(T){if(!ye()){o.splice(S,0,{type:"functionName",text:m,i1:A,c1:e,c2:E});break e}if("{"===t[x][d]){if(o.splice(S,0,{type:"function DEFINITION name",text:m,i1:A,c1:e,c2:E}),P===S){b=P+1,o[b++].type="( function DEFINITION";let e,t=!0;i:for(;;){if(e=M(),", function CALL"===e.type){e.type=", function DEFINITION",b++,t=!0;continue i}if(") function CALL"===e.type)break i;t&&"idkVariable"===e.type&&("byref"===e.text.toLowerCase()&&(e.type="byref",b++,e=G()),e.type="Param",b++,e=M(),"*"===e.text&&"1operator"===e.type&&(e.type="* variadic Argument"));let i=1;for(;;){const n=e.type;if(i){if(") function CALL"===n?i--:"( function CALL"===n&&i++,0===i)break i;if(1===i&&", function CALL"===n){b++,t=!0;continue i}}e=o[++b]}}e.type=") function DEFINITION"}else r("illegal: { but not function DEFINITION",we());o.push({type:"{ function DEFINITION",text:"{",i1:x,c1:d}),d++,v=!0;continue t}if(o.splice(S,0,{type:"functionName",text:m,i1:A,c1:e,c2:E}),B())break e;v=!0;continue t}}const s=F();if(1!==s){if(2===s)break e;for(d=d===a?d+1:d;d<g;){if(":"===t[x][d]){if(d++,d<g&&":"===t[x][d]){d++;const e=t[x].slice(a,d);x===_&&!1!==R&&o.splice(R),o.push({type:"hotkey",text:e,i1:x,c1:a,c2:d});const i=t[x][d],r=d+1;if(!i||n.whiteSpaceObj[i]||r!==g&&!n.whiteSpaceObj[t[x][r]]||(o.push({type:"hotkey replacementChar",text:i,i1:x,c1:d}),d++),!ye())break e;v=!0;continue t}if(d===g||n.whiteSpaceObj[t[x][d]]){const e=t[x].slice(a,d);if(o.push({type:"label:",text:e,i1:x,c1:a,c2:d}),!ye())break e;v=!0;continue t}}d++}if(v){v=!1;continue e}break t}}r("end of lineLoop"),x++}if(o.length){const e=o.length-1,t=o[e];t.i1&&t.i1+1===i&&"\n"===t.text&&o.splice(e,1)}return o;function G(){for(;;){const e=o[b];if(e.text){if("concat"===e.type){e.type="whiteSpaces",b++;continue}if(s[e.type]){b++;continue}return e}b++}}function M(){for(;;){const e=o[b];if(e.text){if(s[e.type]){b++;continue}return e}b++}}function F(){if(1===function(){let e;e:for(;;){if(":"===t[x][d+3])return 2;if(d<g-2&&n.assignmentOperators[e=t[x].slice(d,d+3)]){o.push({type:"3operator",text:e,i1:x,c1:d,c2:d+3}),d+=3;break e}if(":"===t[x][d+2])return 2;if(d<g-1&&n.assignmentOperators[e=t[x].slice(d,d+2)]){o.push({type:"2operator",text:e,i1:x,c1:d,c2:d+2}),d+=2;break e}return!1}return C=-1,$=x,1}()){o.splice(S,0,{type:"assignment",text:m,i1:A,c1:void 0,c2:E});const e=x;Y(),ne()||x===e&&fe();const t=o.length-1;return o.splice(o.length-("emptyLines"===o[t].type?1:0),0,{type:"end assignment"}),B()?2:(v=!0,1)}}function q(e){if(z(e)){if(x===i)return!1;for(;z(e);)if(x===i)return!1;return!0}}function z(e){if(","===t[x][d])return o.push({type:e,text:",",i1:x,c1:d}),d++,j=!0,ee(),j=!1,!0}function B(){for(;x<i;){if(","!==t[x][d])return!1;o.push({type:", assignment",text:",",i1:x,c1:d}),d++,ne()||fe();const e=o.length-1;o.splice(o.length-("end comma assignment"===o[e].type?1:0),0,{type:"end assignment"})}return!0}function W(){V=!0,he(),a=d,te()}function U(){const e=function(){if(n.namedIf[m.toLowerCase()]){if(o.splice(S,0,{type:"named if",text:m,i1:A,c1:a,c2:E}),he(),j=!0,te(),o.push({type:", 1 namedIf",text:",",i1:x,c1:d}),d++,j=!1,ne()||fe(),","===t[x][d]){o.push({type:", 2 namedIf",text:",",i1:x,c1:d}),d++;const e=d;return he(),a=d,be(),m=t[x].slice(a,d),n.typeOfValidVarName[m.toLowerCase()]?(d=e,v=!0,1):(d=e,ee(),2)}return ye()?("{"===t[x][d]&&(o.push({type:"{ namedIf",text:"{",i1:x,c1:d}),d++),ee(),2):2}}();if(e)return e;const r=function(){if("loop"===m.toLowerCase()){if(o.splice(S,0,{type:"loop",text:m,i1:A,c1:a,c2:E}),!ye())return 2;if(n.variableCharsObj[t[x][d]])e:for(;;){let e,i;if("reg"!==(e=t[x].slice(d,i=d+3)).toLowerCase()||n.variableCharsObj[t[x][i]])if("files"!==(e=t[x].slice(d,i=d+4)).toLowerCase()||n.variableCharsObj[t[x][i]])if("files"!==(e=t[x].slice(d,i=d+5)).toLowerCase()||n.variableCharsObj[t[x][i]]){if("parse"!==(e=t[x].slice(d,i=d+5)).toLowerCase()||n.variableCharsObj[t[x][i]])break e;if(o.push({type:"(loop) parse",text:e,i1:x,c1:d,c2:i}),d+=5,!ye())return 2;z(", 1 (loop) parse")&&z(", 2 (loop) parse")&&z(", 3 (loop) parse")}else{if(o.push({type:"(loop) files",text:e,i1:x,c1:d,c2:i}),d+=5,!ye())return 2;z(", 1 (loop) files")&&z(", 2 (loop) files")}else{if(o.push({type:"(loop) read",text:e,i1:x,c1:d,c2:i}),d+=4,!ye())return 2;z(", 1 (loop) read")&&z(", 2 (loop) read")}else{if(o.push({type:"(loop) Reg",text:e,i1:x,c1:d,c2:i}),d+=3,!ye())return 2;z(", 1 (loop) Reg")&&z(", 2 (loop) Reg")}return"{"!==t[x][d]||(o.push({type:"{ loop",text:"{",i1:x,c1:d}),d++,ye())?(v=!0,1):2}return"{"===t[x][d]?(o.push({type:"{ loop",text:"{",i1:x,c1:d}),d++,ye()?(v=!0,1):2):(j=!0,ee(),j=!1,z(", 1 (loop) idk")&&z(", 2 (loop) idk")&&z(", 3 (loop) idk"),"{"!==t[x][d]||(o.push({type:"{ loop",text:"{",i1:x,c1:d}),d++,ye())?(v=!0,1):2)}}();if(r)return r;const s=H();if(s)return s;return function(){if("sendmessage"===m.toLowerCase())return o.splice(S,0,{type:"sendmessage",text:m,i1:A,c1:a,c2:E}),Y(),ne()||fe(),Q(", 2 sendmessage")&&Q(", 3 sendmessage")&&q(", sendmessage v1Expr"),1}()||("return"===m.toLowerCase()?(o.splice(S,0,{type:"return",text:m,i1:A,c1:a,c2:E}),Y(),ne()||fe(),x<i&&","===t[x][d]&&(o.push({type:", doReturn",text:",",i1:x,c1:d}),d++,ye()),v=!0,1):"throw"===m.toLowerCase()?(o.splice(S,0,{type:"throw",text:m,i1:A,c1:a,c2:E}),ne()||fe(),x<i&&","===t[x][d]&&(o.push({type:", doThrow",text:",",i1:x,c1:d}),d++,ye()),v=!0,1):"until"===m.toLowerCase()?(o.splice(S,0,{type:"until",text:m,i1:A,c1:a,c2:E}),ne()||fe(),x<i&&","===t[x][d]&&(o.push({type:", doUntil",text:",",i1:x,c1:d}),d++,ye()),v=!0,1):void 0)}function H(){if("while"===m.toLowerCase())return o.splice(S,0,{type:"while",text:m,i1:A,c1:a,c2:E}),ne()||fe(),"{"!==t[x][d]||(o.push({type:"{ loop",text:"{",i1:x,c1:d}),d++,ye())?(v=!0,1):2}function Q(e){if(","===t[x][d])return o.push({type:e,text:",",i1:x,c1:d}),d++,Y(),ne()||fe(),!0}function Y(){let e;he(),d<g-1&&"%"===t[x][d]&&n.whiteSpaceObj[e=t[x][d+1]]&&(o.push({type:"% v1->v2 expr",text:`%${e}`,i1:x,c1:d,c2:d+2}),d+=2,C=-1)}function J(e){const i=t[x].slice(p,u);o.push({type:`v1String ${e}`,text:i,i1:x,c1:p,c2:u})}function K(e){const i=u+1,n=t[x].slice(p,i);o.push({type:`v1String ${e}`,text:n,i1:x,c1:p,c2:i});const r=t[x].slice(i,d);r&&o.push({type:`endingWhiteSpaces v1Expression ${e}`,text:r,i1:x,c1:i,c2:d})}function X(e){const[i,n]=e;if(n===x)return t[x].slice(i,d);{let e=t[n].slice(i);for(let i=n+1;i<x;i++)e+=`\n${t[i]}`;return e+=`\n${t[x].slice(0,d)}`,e}}function Z(e){if(function(e){if(k){let i,r,s;if("and"===(i=t[x].slice(d,r=d+3)).toLowerCase()&&(r===g||n.whiteSpaceObj[s=t[x][r]]))return k=!1,K(e),o.push({type:`legacyIf and{ws} ${e}`,text:`${i}${s||""}`,i1:x,c1:d,c2:r}),d+=4,p=d,u=d-1,!0}}(e))return Z(e),!1;if(x===D)for(;d<g&&!n.whiteSpaceObj[t[x][d]];){if(u=d,O){if(","===t[x][d]){J(`${e} beforeDoubleComma`),","===t[x][d+1]?(o.push({type:",, legacyIf var in findV1Expression",text:",,",i1:x,c1:d,c2:d+2}),d+=2):(o.push({type:", legacyIf var in findV1Expression",text:",",i1:x,c1:d}),d++),p=d,u=d-1;continue}}else if(j&&!I&&","===t[x][d]&&"`"!==t[x][d-1])return J(`${e} beforeSingleComma`),p=d,u=d-1,!0;xe()?(d++,p=d):d++}else for(;d<g&&!n.whiteSpaceObj[t[x][d]];){if(u=d,":"===t[x][d])return _=x,!0;if(O){if(","===t[x][d]){J(`${e} beforeDoubleComma`),","===t[x][d+1]?(o.push({type:",, legacyIf var in findV1Expression",text:",,",i1:x,c1:d,c2:d+2}),d+=2):(o.push({type:", legacyIf var in findV1Expression",text:",",i1:x,c1:d}),d++),p=d,u=d-1;continue}}else if(j&&!I&&","===t[x][d]&&"`"!==t[x][d-1])return J(`${e} beforeSingleComma`),p=d,u=d-1,!0;xe()?(d++,p=d):d++}for(;d<g&&n.whiteSpaceObj[t[x][d]];)d++}function ee(){let e;return he(),d<g-1&&"%"===t[x][d]&&n.whiteSpaceObj[e=t[x][d+1]]?(o.push({type:"% v1->v2 expr",text:`%${e}`,i1:x,c1:d,c2:d+2}),d+=2,C=-1,ne()||fe(),!0):(te(),!0)}function te(){if(V)return function(){if(n.variableCharsObj[t[x][d]])N=d,d++;else{if(!(d<g&&"%"===t[x][d]))return!1;o.push({type:"% checkPercent",text:"%",i1:x,c1:d}),ge(),d++,N=d}for(;d<g;){if(d<g&&"%"===t[x][d]){if(o.push({type:"v1String findIdkVar",text:t[x].slice(N,d),i1:x,c1:N,c2:d}),o.push({type:"% checkPercent",text:"%",i1:x,c1:d}),ge(),d++,d===g)return!0;N=d}if(!n.variableCharsObj[t[x][d]])break;d++}const e=t[x].slice(N,d);e&&o.push({type:"v1String findIdkVar",text:e,i1:x,c1:N,c2:d})}(),ie(),void(V=!1);p=d,u=d-1;e:for(;";"!==t[x][d]||!n.whiteSpaceObj[t[x][d-1]];){for(;d<g;){if(";"===t[x][d])break e;if(Z("findV1Expression"))return}break}K("findV1Expression"),ie()}function ie(){if(!ye())return!1;if(void 0===t[x][d]&&r("this shouldn't happen resolveV1Continuation lines[i][c] === undefined"),"("===t[x][d]){I=!0,o.push({type:"( resolveV1Continuation",text:"(",i1:x,c1:d}),d++;const e=t[x].slice(d,g);for(o.push({type:"resolveV1Continuation to EOL",text:e,i1:x,c1:d,c2:g});++x<i;){o.push({type:"newline resolveV1Continuation",text:"\n",i1:x,c1:g}),d=0,g=t[x].length;const e=d;for(;d<g&&n.whiteSpaceObj[t[x][d]];)d++;if(")"===t[x][d]){I=!1;const i=t[x].slice(e,d);return i&&o.push({type:"whiteSpaces before ) resolveV1Continuation",text:i,i1:x,c1:e,c2:d}),o.push({type:") resolveV1Continuation",text:")",i1:x,c1:d}),d++,te(),!0}for(p=0,u=-1;d<g;)Z("resolveV1Continuation");K("resolveV1Continuation")}return!0}if(!V){if(d<g-2&&n.v1Continuator[t[x].slice(d,d+3)])o.push({type:"3 v1Continuator",text:t[x].slice(d,d+3),i1:x,c1:d,c2:d+3}),d+=3;else if(d<g-1&&n.v1Continuator[t[x].slice(d,d+2)])o.push({type:"2 v1Continuator",text:t[x].slice(d,d+2),i1:x,c1:d,c2:d+2}),d+=2;else{if(!(d<g&&n.v1Continuator[t[x][d]]))return!1;if(function(){if(O&&","===t[x][d])return","===t[x][d+1]?(o.push({type:",, legacyIf var in",text:",,",i1:x,c1:d,c2:d+2}),d+=2,ee()):(o.push({type:", legacyIf var in",text:",",i1:x,c1:d}),d++,ee()),!0}())return!1;if(j)return!1;o.push({type:"1 v1Continuator",text:t[x][d],i1:x,c1:d}),d++}return R=o.length-1,ee(),!1}}function ne(){if(re()){for(;re(););return!0}return!1}function re(){if(x===i)return!1;let e,s=x;if(w){if(he(),d!==g&&";"===t[x][d]&&(r("ILLEGAL semiColonComment insideContinuation",me()),ue()))return fe()}else if(s=x,!ye())return!1;return e=x===s?function(){if(d===g)return!1;if(function(){let e,s,c,f=!0;e:for(;;){t:for(;;){if(d<g-2&&n.operatorsObj[s=(e=t[x].slice(d,c=d+3)).toLowerCase()]){if("and"===s){if(n.variableCharsObj[c])break t;if(k)return!1}if("not"===s&&n.variableCharsObj[t[x][c]])break t;o.push({type:"3operator",text:e,i1:x,c1:d,c2:d+3}),d+=3;break e}break t}t:for(;;){if(d<g-1&&n.operatorsObj[s=t[x].slice(d,c=d+2).toLowerCase()]){if("or"===s&&n.variableCharsObj[t[x][c]])break t;o.push({type:"2operator",text:t[x].slice(d,d+2),i1:x,c1:d,c2:d+2}),d+=2;break e}break t}if(d<g&&n.operatorsObj[t[x][d].toLowerCase()]){if("?"===t[x][d]){if(o.push({type:"? ternary",text:"?",i1:x,c1:d}),L++,d++,C=-1,$=x,ne()||fe(),x===i)return!1;":"===t[x][d]?(o.push({type:": ternary",text:":",i1:x,c1:d}),L--,d++):(r("illegal: why is there no : after ? ternary",me()),L--,d++,f=!1)}else":"===t[x][d]?(L||r("illegal: unexpected :",me()),f=!1):(o.push({type:"1operator",text:t[x][d],i1:x,c1:d}),d++);break e}return!1}return C=-1,$=x,f}())return fe(),!0;const e=o.length-1;return x===C&&n.whiteSpaceObj[t[x][d-1]]&&fe()?(o[e].type="concat",!0):!!w&&(ue()?(fe(),!0):void 0)}():d!==g&&(function(){let e,s,c,f=!0;e:for(;;){t:for(;;){if(d<g-2&&n.v2Continuator[s=(e=t[x].slice(d,c=d+3)).toLowerCase()]){if("and"===s){if(n.variableCharsObj[c])break t;if(k)return!1}o.push({type:"3operator",text:e,i1:x,c1:d,c2:d+3}),d+=3;break e}break t}t:for(;;){if(d<g-1&&n.v2Continuator[s=t[x].slice(d,c=d+2).toLowerCase()]){if("or"===s&&n.variableCharsObj[t[x][c]])break t;o.push({type:"2operator",text:t[x].slice(d,d+2),i1:x,c1:d,c2:d+2}),d+=2;break e}break t}if(d<g&&n.v2Continuator[t[x][d].toLowerCase()]){if("+"===t[x][d]&&"+"===t[x][d+1]&&r("illegal v2Continuator `++`",we()),"-"===t[x][d]&&"-"===t[x][d+1]&&r("illegal v2Continuator `++`",we()),"?"===t[x][d]){if(o.push({type:"? ternary",text:"?",i1:x,c1:d}),L++,d++,C=-1,$=x,ne()||fe(),x===i)return!1;":"===t[x][d]?(o.push({type:": ternary",text:":",i1:x,c1:d}),L--,d++):(r("illegal: why is there no : after ? ternary",me()),L--,d++,f=!1)}else":"===t[x][d]?(L||r("illegal: unexpected :",me()),f=!1):(o.push({type:"1operator",text:t[x][d],i1:x,c1:d}),d++);break e}return!1}return C=-1,$=x,f}()?(fe(),!0):!!w&&(ue()?(fe(),!0):void 0)),e?(x!==s&&(R=o.length,_=x),!0):w&&ue()?fe():void 0}function oe(e){o.push({type:`[ ${e}`,text:"[",i1:x,c1:d}),$=x,d++;let i=!1;for(;;){if(!ye())return!1;","===t[x][d]?(d++,i=!0,$=x,C=-1):x!==$&&r(`ILLEGAL ] ${e} i !== legalObjLine`,me());const n=o.length;if(!ne()&&!fe())return i&&(i=!1,r("ILLEGAL trailling , ARRAY",me()),o.splice(n,0,{type:`ILLEGAL trailling , ${e}`,text:",",i1:x,c1:d})),"]"!==t[x][d]&&r(`\`${t[x][d]}\` illegal NOT ] ${e} ${we()}`),o.push({type:`] ${e}`,text:"]",i1:x,c1:d}),d++,!0;i&&(i=!1,o.splice(n,0,{type:`, ${e}`,text:",",i1:x,c1:d}))}}function se(){if(ce()){for(;ce(););return!0}}function ce(){if("."===t[x][d]){T=!1,d++,o.push({type:". property",text:".",i1:x,c1:d});const e=d;return be(),o.push({type:"(.) property findTrailingExpr",text:t[x].slice(e,d),i1:x,c1:e,c2:d}),!0}if("("===t[x][d]){const e=function(e){const n=o.length,s=o[o.length-1];let c;for(o.push({type:"( function CALL",text:"(",i1:x,c1:d}),$=x,C=-1,d++;;){if(!ye())return r("ILLEGAL ) function CALL OUT OF LINES",me()),2;","===t[x][d]?(d++,c=!0,$=x,C=-1):x!==$&&r("ILLEGAL ) function CALL i !== legalObjLine",me());const e=o.length;if(!ne()&&!fe()){if(","===t[x][d]){o.splice(e,0,{type:", function CALL",text:",",i1:x,c1:d});continue}return c&&(c=!1,r("ILLEGAL trailling , function CALL",me()),o.splice(e,0,{type:"ILLEGAL trailling , function CALL",text:",",i1:x,c1:d})),")"!==t[x][d]&&r(`\`${t[x][d]}\` illegal NOT ) function CALL ${we()}`),o.push({type:") function CALL",text:")",i1:x,c1:d}),d++,T=!0,P=n,s&&("idkVariable"===s.type||"(.) property findTrailingExpr"===s.type)&&(s.type="functionName"),C=x,1}if(c&&(c=!1,o.splice(e,0,{type:", function CALL",text:",",i1:x,c1:d})),x===i)return 2}}();if(1===e)return!0;if(2===e)return!1}if(function(){if("["===t[x][d])return oe("ArrAccess"),!0}())return T=!1,!0}function fe(){if(x===i)return r("illegal empty assignment",me()),!1;if(he(),d===g||";"===t[x][d])return w?ue()&&fe():pe()&&(x++,d=0,g=t[x].length,fe()),!1;if(a=d,"%"===t[x][d]||n.variableCharsObj[t[x][d]]){for(d++,o.push({type:"start unit"});d<g&&(de()||n.variableCharsObj[t[x][d]]);)d++;const e=t[x].slice(a,d);if(isNaN(Number(e))){if(k&&"and"===e.toLowerCase())return k=!1,o.push({type:"legacyIf and{ws} findExpression",text:`${e} `,i1:x,c1:a,c2:d+1}),d++,!1;o.push({type:"idkVariable",text:e,i1:x,c1:a,c2:d}),C=x}else o.push({type:"Integer",text:e,i1:x,c1:a,c2:d});return se(),o.push({type:"end unit"}),ne(),!0}if('"'===t[x][d]&&(l=d,f=x,d++,le()||ae()||(d++,r("AS LAST RESORT: doing skipThroughEmptyLines",me()),w=!0,ye()),1))return ne(),!0;if(x===i)return r("findExpression OutOfLines"),!1;if("("===t[x][d]){let e="group";const t=o.length-1;let i=o[t];for(;;){if(i){if("emptyLines"===i.type&&(i=o[t-1],!i))break;"if"===i.type?e="if":"while"===i.type&&(e="while")}break}return o.push({type:`( ${e}`,text:"(",i1:x,c1:d}),d++,C=-1,ne()||fe(),o.push({type:`) ${e}`,text:")",i1:x,c1:d}),d++,ne(),!0}if("["===t[x][d])return!!oe("Array")&&(ne(),!0);if(x!==C&&"{"===t[x][d]){o.push({type:"{ object",text:"{",i1:x,c1:d}),$=x,L++,d++;let e=!1;for(;;){if(!ye())return!1;const i=o.length;","===t[x][d]?(d++,e=!0,$=x,C=-1,he()):x!==$&&r("ILLEGAL ] Array i !== legalObjLine",me());const n=o.length;if(!ne()&&!fe())return e&&(e=!1,r("ILLEGAL trailling , object",me()),o.splice(i,0,{type:"ILLEGAL trailling , object",text:",",i1:x,c1:d})),"}"!==t[x][d]&&r(`\`${t[x][d]}\` illegal NOT } object ${we()}`),o.push({type:"} object",text:"}",i1:x,c1:d}),C=-1,L--,d++,se(),ne(),ne(),!0;{const t=o.length-n;if(4===t){let e=o[n+3];"emptyLines"===e.type&&(e=o[n+1],"idkVariable"===e.type&&(e.type="singleVar"))}else if(3===t){const e=o[n+1];"idkVariable"===e.type&&(e.type="singleVar")}e&&(e=!1,o.splice(i,0,{type:", object",text:",",i1:x,c1:d}))}if(":"!==t[x][d])return r("illegal obj2, key without : ",me()),!1;o.push({type:": object",text:":",i1:x,c1:d}),d++,$=x,he(),ne()||fe()}}}function le(){for(;d<g;){if('"'===t[x][d]){if(d<g-1&&'"'===t[x][d+1]){d+=2;continue}{d++,C=x;const e=X([l,f]);return o.push({type:"String",text:e,i1:f,c1:l,i2:x,c2:d}),!0}}if(";"===t[x][d]&&n.whiteSpaceObj[t[x][d-1]])return r("semiColonComment when findClosingQuote",me()),!1;d++}return!1}function ae(){return!!pe()&&(!(!function(){for(x++;x<i;){if(d=0,g=t[x].length,he(),d<g&&")"===t[x][d])return w=!1,d++,le();if(le())return ne(),!1;x++}}()&&!w)||ae())}function pe(){return!!ye()&&"("===t[x][d]&&(w=!0,!0)}function ue(){return x++,d=0,g=t[x].length,he(),d!==g&&")"===t[x][d]?(w=!1,r(`) Expression ${me()}`),d++,!0):(r(`illegal in endExprContinuation ${me()}`),!1)}function ye(){const e=d,r=x;e:for(;x<i;){for(;d<g&&n.whiteSpaceObj[t[x][d]];)d++;if(d===g);else if(";"!==t[x][d]||0!==d&&!n.whiteSpaceObj[t[x][d-1]]){if(!(d<g-1&&"/*"===t[x].slice(d,d+2))){const t=X([e,r]);return t&&o.push({type:"emptyLines",text:t,i1:r,c1:e,i2:x,c2:d}),!0}for(;;){if(++x===i)break e;for(d=0,g=t[x].length;d<g&&n.whiteSpaceObj[t[x][d]];)d++;if(d<g-1&&"*/"===t[x].slice(d,d+2)){d+=2;continue e}}}if(x++,!(x<i))break e;d=0,g=t[x].length}x--,d=g;const s=X([e,r]);return s&&o.push({type:"emptyLines EOF",text:s,i1:r,c1:e,i2:x,c2:d}),x++,!1}function he(){const e=d;for(;d<g&&n.whiteSpaceObj[t[x][d]];)d++;const i=t[x].slice(e,d);i&&o.push({type:"whiteSpaces",text:i,i1:x,c1:e,c2:d})}function xe(){if("%"===t[x][d]){if("`"!==t[x][d-1]){const e=u,i=t[x].slice(p,e);for(o.push({type:"v1String findPercentVarV1Expression",text:i,i1:x,c1:p,c2:e}),o.push({type:"%START %Var%",text:"%",i1:x,c1:d}),d++,y=d,d<g&&n.variableCharsObj[t[x][d]]||r("illegal empty %VAR%");d<g&&n.variableCharsObj[t[x][d]];)d++;const s=t[x].slice(y,d);return r("percentVar====",s),o.push({type:"percentVar v1Expression",text:s,i1:x,c1:y,c2:d}),"%"!==t[x][d]&&r("illegal %VAR% in v1Expression",me()),u=d,o.push({type:"END% %Var%",text:t[x][d],i1:x,c1:d}),!0}r("literal % in findV1Expression")}return!1}function de(){return d<g&&"%"===t[x][d]&&(d++,be(),d<g&&"%"===t[x][d]||(r(t[x].slice(a,d),"ILLEGAL %VAR%",me()),!1))}function ge(){return d++,N=d,be(),d<g&&"%"===t[x][d]?(o.push({type:"v1String percentVarMid",text:t[x].slice(N,d),i1:x,c1:N,c2:d}),o.push({type:"% percentVarMid",text:"%",i1:x,c1:d}),!0):(r(t[x].slice(a,d),"ILLEGAL %VAR%",me()),!1)}function be(){for(;d<g&&n.variableCharsObj[t[x][d]];)d++}function me(){return`${d+1} line ${x+1}`}function we(){return`line:${x+1}, char:${d+1}`}}},246:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.thisCouldBeFuncName=t.elseLoopReturn=t.legacyIfOperators=t.v2Continuator=t.v1Continuator=t.assignmentOperators=t.operatorsObj=t.whiteSpaceOverrideAssign=t.typeOfValidVarName=t.namedIf=t.propCharsObj=t.variableCharsObj=t.whiteSpaceObj=t.whiteSpace=void 0,t.whiteSpace=/\u000B\u000C\u0020\u00A0/,t.whiteSpaceObj={" ":!0,"\t":!0},t.variableCharsObj={a:!0,b:!0,c:!0,d:!0,e:!0,f:!0,g:!0,h:!0,i:!0,j:!0,k:!0,l:!0,m:!0,n:!0,o:!0,p:!0,q:!0,r:!0,s:!0,t:!0,u:!0,v:!0,w:!0,x:!0,y:!0,z:!0,A:!0,B:!0,C:!0,D:!0,E:!0,F:!0,G:!0,H:!0,I:!0,J:!0,K:!0,L:!0,M:!0,N:!0,O:!0,P:!0,Q:!0,R:!0,S:!0,T:!0,U:!0,V:!0,W:!0,X:!0,Y:!0,Z:!0,0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,_:!0,"#":!0,"@":!0,$:!0},t.propCharsObj={a:!0,b:!0,c:!0,d:!0,e:!0,f:!0,g:!0,h:!0,i:!0,j:!0,k:!0,l:!0,m:!0,n:!0,o:!0,p:!0,q:!0,r:!0,s:!0,t:!0,u:!0,v:!0,w:!0,x:!0,y:!0,z:!0,A:!0,B:!0,C:!0,D:!0,E:!0,F:!0,G:!0,H:!0,I:!0,J:!0,K:!0,L:!0,M:!0,N:!0,O:!0,P:!0,Q:!0,R:!0,S:!0,T:!0,U:!0,V:!0,W:!0,X:!0,Y:!0,Z:!0,0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,_:!0},t.namedIf={ifequal:!0,ifnotequal:!0,ifless:!0,iflessorequal:!0,ifgreater:!0,ifgreaterorequal:!0},t.typeOfValidVarName={class:5,autotrim:4,blockinput:4,break:4,catch:4,click:4,clipwait:4,continue:4,control:4,controlclick:4,controlfocus:4,controlget:4,controlgetfocus:4,controlgetpos:4,controlgettext:4,controlmove:4,controlsend:4,controlsendraw:4,controlsettext:4,coordmode:4,critical:4,detecthiddentext:4,detecthiddenwindows:4,drive:4,driveget:4,drivespacefree:4,edit:4,else:4,envadd:4,envdiv:4,envget:4,envmult:4,envset:4,envsub:4,envupdate:4,exit:4,exitapp:4,fileappend:4,filecopy:4,filecopydir:4,filecreatedir:4,filecreateshortcut:4,filedelete:4,fileencoding:4,fileinstall:4,filegetattrib:4,filegetshortcut:4,filegetsize:4,filegettime:4,filegetversion:4,filemove:4,filemovedir:4,fileread:4,filereadline:4,filerecycle:4,filerecycleempty:4,fileremovedir:4,fileselectfile:4,fileselectfolder:4,filesetattrib:4,filesettime:4,finally:4,for:4,formattime:4,getkeystate:4,gosub:4,goto:4,groupactivate:4,groupadd:4,groupclose:4,groupdeactivate:4,gui:4,guicontrol:4,guicontrolget:4,hotkey:4,ifequal:4,ifnotequal:4,ifexist:4,ifnotexist:4,ifgreater:4,ifgreaterorequal:4,ifinstring:4,ifnotinstring:4,ifless:4,iflessorequal:4,ifmsgbox:4,ifwinactive:4,ifwinnotactive:4,ifwinexist:4,ifwinnotexist:4,imagesearch:4,inidelete:4,iniread:4,iniwrite:4,input:4,inputbox:4,keyhistory:4,keywait:4,listhotkeys:4,listlines:4,listvars:4,loop:4,menu:4,mouseclick:4,mouseclickdrag:4,mousegetpos:4,mousemove:4,msgbox:4,onexit:4,outputdebug:4,pause:4,pixelgetcolor:4,pixelsearch:4,postmessage:4,process:4,progress:4,random:4,regdelete:4,regread:4,regwrite:4,reload:4,return:4,run:4,runas:4,runwait:4,send:4,sendraw:4,sendinput:4,sendplay:4,sendevent:4,sendlevel:4,sendmessage:4,sendmode:4,setbatchlines:4,setcapslockstate:4,setcontroldelay:4,setdefaultmousespeed:4,setenv:4,setformat:4,setkeydelay:4,setmousedelay:4,setnumlockstate:4,setscrolllockstate:4,setregview:4,setstorecapslockmode:4,settimer:4,settitlematchmode:4,setwindelay:4,setworkingdir:4,shutdown:4,sleep:4,sort:4,soundbeep:4,soundget:4,soundgetwavevolume:4,soundplay:4,soundset:4,soundsetwavevolume:4,splashimage:4,splashtexton:4,splashtextoff:4,splitpath:4,statusbargettext:4,statusbarwait:4,stringcasesense:4,stringgetpos:4,stringleft:4,stringlen:4,stringlower:4,stringmid:4,stringreplace:4,stringright:4,stringsplit:4,stringtrimleft:4,stringtrimright:4,stringupper:4,suspend:4,switch:4,sysget:4,thread:4,throw:4,tooltip:4,transform:4,traytip:4,try:4,until:4,urldownloadtofile:4,while:4,winactivate:4,winactivatebottom:4,winclose:4,wingetactivestats:4,wingetactivetitle:4,wingetclass:4,winget:4,wingetpos:4,wingettext:4,wingettitle:4,winhide:4,winkill:4,winmaximize:4,winmenuselectitem:4,winminimize:4,winminimizeall:4,winminimizeallundo:4,winmove:4,winrestore:4,winset:4,winsettitle:4,winshow:4,winwait:4,winwaitactive:4,winwaitnotactive:4,winwaitclose:4,global:3,local:3,static:3,if:2,"#clipboardtimeout":1,"#commentflag":1,"#errorstdout":1,"#escapechar":1,"#hotkeyinterval":1,"#hotkeymodifiertimeout":1,"#hotstring":1,"#if":1,"#ifwinactive":1,"#ifwinexist":1,"#ifwinnotactive":1,"#ifwinnotexist":1,"#iftimeout":1,"#include":1,"#includeagain":1,"#inputlevel":1,"#installkeybdhook":1,"#installmousehook":1,"#keyhistory":1,"#maxhotkeysperinterval":1,"#maxmem":1,"#maxthreads":1,"#maxthreadsbuffer":1,"#maxthreadsperhotkey":1,"#menumaskkey":1,"#noenv":1,"#notrayicon":1,"#persistent":1,"#requires":1,"#singleinstance":1,"#usehook":1,"#warn":1,"#winactivateforce":1,"#ltrim":1},t.whiteSpaceOverrideAssign={1:!0,2:!0,3:!0},t.operatorsObj={"++":!0,"--":!0,"**":!0,"!":!0,"~":!0,"&":!0,"*":!0,"/":!0,"//":!0,"-":!0,"+":!0,"<<":!0,">>":!0,"^":!0,"|":!0,".":!0,"~=":!0,">":!0,"<":!0,">=":!0,"<=":!0,"=":!0,"==":!0,"<>":!0,"!=":!0,not:!0,and:!0,"&&":!0,or:!0,"||":!0,"?":!0,":":!0,":=":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"//=":!0,".=":!0,"|=":!0,"&=":!0,"^=":!0,">>=":!0,"<<=":!0},t.assignmentOperators={"++":!0,"--":!0,":=":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"//=":!0,".=":!0,"|=":!0,"&=":!0,"^=":!0,">>=":!0,"<<=":!0},t.v1Continuator={",":!0,"**":!0,"!":!0,"~":!0,"&":!0,"*":!0,"/":!0,"//":!0,"-":!0,"+":!0,"<<":!0,">>":!0,"^":!0,"|":!0,".":!0,"~=":!0,">":!0,"<":!0,">=":!0,"<=":!0,"=":!0,"==":!0,"<>":!0,"!=":!0,"&&":!0,"||":!0,"?":!0,":=":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"//=":!0,".=":!0,"|=":!0,"&=":!0,"^=":!0,">>=":!0,"<<=":!0},t.v2Continuator={"**":!0,"!":!0,"~":!0,"&":!0,"*":!0,"/":!0,"//":!0,"-":!0,"+":!0,"<<":!0,">>":!0,"^":!0,"|":!0,".":!0,"~=":!0,">":!0,"<":!0,">=":!0,"<=":!0,"=":!0,"==":!0,"<>":!0,"!=":!0,and:!0,"&&":!0,or:!0,"||":!0,"?":!0,":":!0,":=":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"//=":!0,".=":!0,"|=":!0,"&=":!0,"^=":!0,">>=":!0,"<<=":!0},t.legacyIfOperators={"=":!0,"<>":!0,"!=":!0,">":!0,">=":!0,"<":!0,"<=":!0},t.elseLoopReturn={else:!0,loop:!0,return:!0},t.thisCouldBeFuncName={idkVariable:!0,"(.) property findTrailingExpr":!0}},324:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(i(544)),o=n(i(776));t.default=e=>o.default(r.default(e.toString().replace(/\r/g,"")))}},t={};return function i(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}(324)})()}));